import{br as F,by as I,bt as P,bu as g,bn as R}from"./index-b50be390.js";import{A as $,n as d,f as C,o as j,B as J,D as y,Q as e,J as s,O as w,P as M,u as V,F as O,r as o,_ as Q}from"./_plugin-vue_export-helper-60a1b51b.js";const W={class:"check-title"},q={class:"check-table"},G=$({__name:"Check",setup(H){const S=F(),r=I(),x=P(),{infos:A}=g(S),{checkList:z}=g(r),h="全部",i=d(h),_=d(""),m=d(2),v=d(1),f=C(()=>z.value.filter(a=>(a.state===i.value||h===i.value)&&a.note.includes(_.value))),L=C(()=>f.value.slice((v.value-1)*m.value,v.value*m.value)),B=a=>{v.value=a},k=(a,l,b)=>{r.putApplyAction({_id:a,state:l}).then(c=>{c.data.errcode===0&&(r.getApplyAction({approverid:A.value._id}).then(p=>{p.data.errcode===0&&r.updateCheckList(p.data.rets)}),x.putRemindAction({userid:b,applicant:!0}),R.success("审批成功"))})};return(a,l)=>{const b=o("el-input"),c=o("el-button"),p=o("el-divider"),u=o("el-radio-button"),N=o("el-radio-group"),T=o("el-space"),n=o("el-table-column"),U=o("el-table"),D=o("el-pagination");return j(),J(O,null,[y("div",W,[e(T,null,{default:s(()=>[e(b,{modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=t=>_.value=t),placeholder:"请输入搜索关键词"},null,8,["modelValue"]),e(c,{type:"primary",icon:"search"},{default:s(()=>[w("搜索")]),_:1}),e(p,{direction:"vertical"}),e(N,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=t=>i.value=t)},{default:s(()=>[e(u,{label:"全部"}),e(u,{label:"待审批"}),e(u,{label:"已通过"}),e(u,{label:"未通过"})]),_:1},8,["modelValue"])]),_:1})]),y("div",q,[e(U,{data:V(L),border:""},{default:s(()=>[e(n,{prop:"applicantname",label:"申请人",width:"180"}),e(n,{prop:"reason",label:"审批事由",width:"180"}),e(n,{prop:"time",label:"时间"},{default:s(t=>[w(M(t.row.time.join(" - ")),1)]),_:1}),e(n,{prop:"note",label:"备注"}),e(n,{label:"操作",width:"180"},{default:s(t=>[e(c,{onClick:E=>k(t.row._id,"已通过",t.row.applicantid),type:"success",icon:"check",size:"small",circle:""},null,8,["onClick"]),e(c,{onClick:E=>k(t.row._id,"未通过",t.row.applicantid),type:"danger",icon:"close",size:"small",circle:""},null,8,["onClick"])]),_:1}),e(n,{prop:"state",label:"状态",width:"180"})]),_:1},8,["data"]),e(D,{small:"",background:"",layout:"prev, pager, next",total:V(f).length,"page-size":m.value,onCurrentChange:B},null,8,["total","page-size"])])],64)}}});const Y=Q(G,[["__scopeId","data-v-094453b9"]]);export{Y as default};
